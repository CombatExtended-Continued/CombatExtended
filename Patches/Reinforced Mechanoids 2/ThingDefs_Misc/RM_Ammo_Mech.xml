<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Reinforced Mechanoids 2</li>
        </mods>

        <match Class="PatchOperationSequence">
            <operations>

                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>

                        <!-- ===== Ammo Sets ===== -->

                        <!-- Charged -->
                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_RM_5x35mmS</defName>
                            <label>5x35mm Special</label>
                            <ammoTypes>
                                <Ammo_5x35mmCharged>RM_Bullet_5x35mmS</Ammo_5x35mmCharged>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_RM_5x35mmH</defName>
                            <label>5x35mm Hyper</label>
                            <ammoTypes>
                                <Ammo_5x35mmCharged>RM_Bullet_5x35mmH</Ammo_5x35mmCharged>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <!-- Shard -->
                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_ShardPistol</defName>
                            <label>Crystalline Shard</label>
                            <ammoTypes>
                                <RM_Ammo_ShardGun>RM_Bullet_ShardPistol</RM_Ammo_ShardGun>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_ShardLance</defName>
                            <label>Crystalline Shard</label>
                            <ammoTypes>
                                <RM_Ammo_ShardGun>RM_Bullet_ShardLance</RM_Ammo_ShardGun>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_ShardSwarmer</defName>
                            <label>Crystalline Shard</label>
                            <ammoTypes>
                                <RM_Ammo_ShardGun>RM_Bullet_ShardSwarmer</RM_Ammo_ShardGun>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <!-- Coil -->
                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_RM_CoilPistolGun</defName>
                            <label>coil charge</label>
                            <ammoTypes>
                                <Ammo_LaserChargePack>RM_Bullet_CoilPistol</Ammo_LaserChargePack>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_RM_CoilRifleGun</defName>
                            <label>coil charge</label>
                            <ammoTypes>
                                <Ammo_LaserChargePack>RM_Bullet_CoilRifle</Ammo_LaserChargePack>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <CombatExtended.AmmoSetDef>
                            <defName>AmmoSet_RM_TeslaGun</defName>
                            <label>coil charge</label>
                            <ammoTypes>
                                <Ammo_LaserChargePack>RM_Bullet_TeslaCoil</Ammo_LaserChargePack>
                            </ammoTypes>
                        </CombatExtended.AmmoSetDef>

                        <!-- ===== Shard Ammo ===== -->
                        <ThingDef Class="CombatExtended.AmmoDef" Name="RMShardBase" ParentName="SmallAmmoBase" Abstract="True">
                            <description>Small, high-velocity crystalline bullet used in Shard weaponry system.</description>
                            <statBases>
                                <Mass>0.01</Mass>
                                <Bulk>0.02</Bulk>
                            </statBases>
                            <tradeTags>
                                <li>CE_AutoEnableTrade</li>
                                <li>CE_AutoEnableCrafting</li>
                            </tradeTags>
                            <thingCategories>
                                <li>AmmoShardRM</li>
                            </thingCategories>
                        </ThingDef>

                        <ThingDef Class="CombatExtended.AmmoDef" ParentName="RMShardBase">
                            <defName>RM_Ammo_ShardGun</defName>
                            <label>Crystalline shard cartridge</label>
                            <graphicData>
                                <texPath>Things/Ammo/Railgun/Rifle</texPath>
                                <graphicClass>CombatExtended.Graphic_StackCountRanged</graphicClass>
                            </graphicData>
                            <statBases>
                                <MarketValue>1</MarketValue>
                            </statBases>
                            <ammoClass>CarbonCrystal</ammoClass>
                            <cookOffProjectile>RM_Bullet_ShardLance</cookOffProjectile>
                        </ThingDef>

                        <!-- ===== Low velocity 5x35mm Projectile ===== -->
                        <ThingDef ParentName="Base5x35mmChargedBullet">
                            <defName>RM_Bullet_5x35mmS</defName>
                            <label>5x35mm Special bullet</label>
                            <graphicData>
                                <texPath>Things/Projectile/Charged/ChargeLanceShot</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <shaderType>TransparentPostLight</shaderType>
                                <drawSize>(0.75,0.75)</drawSize>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE" Inherit="False">
                                <damageDef>Bullet</damageDef>
                                <damageAmountBase>9</damageAmountBase>
                                <speed>160</speed>
                                <secondaryDamage>
                                    <li>
                                        <def>Bomb_Secondary</def>
                                        <amount>1</amount>
                                    </li>
                                </secondaryDamage>
                                <armorPenetrationSharp>27</armorPenetrationSharp>
                                <armorPenetrationBlunt>25.6</armorPenetrationBlunt>
                            </projectile>
                        </ThingDef>

                        <!-- ===== High velocity 5x35mm Projectile ===== -->
                        <ThingDef ParentName="Base5x35mmChargedBullet">
                            <defName>RM_Bullet_5x35mmH</defName>
                            <label>5x35mm Hyper bullet</label>
                            <graphicData>
                                <texPath>Things/Projectile/Charged/ChargeLanceShot</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <shaderType>TransparentPostLight</shaderType>
                                <drawSize>(1.25,1.25)</drawSize>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE" Inherit="False">
                                <damageDef>Bullet</damageDef>
                                <damageAmountBase>13</damageAmountBase>
                                <speed>240</speed>
                                <secondaryDamage>
                                    <li>
                                        <def>Bomb_Secondary</def>
                                        <amount>2</amount>
                                    </li>
                                </secondaryDamage>
                                <armorPenetrationSharp>33</armorPenetrationSharp>
                                <armorPenetrationBlunt>57.6</armorPenetrationBlunt>
                            </projectile>
                        </ThingDef>

                        <!-- ===== Shard Projectiles ===== -->
                        <ThingDef ParentName="Base45ACPBullet">
                            <defName>RM_Bullet_ShardPistol</defName>
                            <label>Shard crystal</label>
                            <graphicData>
                                <texPath>Things/Projectile/ShardShot</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>0.5</drawSize>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>RM_Damage_ShardShot</damageDef>
                                <speed>72</speed>
                                <dropsCasings>false</dropsCasings>
                                <pelletCount>2</pelletCount>
                                <spreadMult>2</spreadMult>
                                <damageAmountBase>4</damageAmountBase>
                                <armorPenetrationBlunt>6.4</armorPenetrationBlunt>
                                <armorPenetrationSharp>24</armorPenetrationSharp>
                            </projectile>
                        </ThingDef>

                        <ThingDef ParentName="Base45ACPBullet">
                            <defName>RM_Bullet_ShardLance</defName>
                            <label>Shard crystal</label>
                            <graphicData>
                                <texPath>Things/Projectile/ShardShot</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>0.5</drawSize>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>RM_Damage_ShardShot</damageDef>
                                <speed>72</speed>
                                <dropsCasings>false</dropsCasings>
                                <pelletCount>3</pelletCount>
                                <spreadMult>2</spreadMult>
                                <damageAmountBase>7</damageAmountBase>
                                <armorPenetrationBlunt>5.6</armorPenetrationBlunt>
                                <armorPenetrationSharp>22</armorPenetrationSharp>
                            </projectile>
                        </ThingDef>

                        <ThingDef ParentName="Base45ACPBullet">
                            <defName>RM_Bullet_ShardSwarmer</defName>
                            <label>Shard crystal</label>
                            <graphicData>
                                <texPath>Things/Projectile/ShardShot</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <drawSize>0.5</drawSize>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>RM_Damage_ShardShot</damageDef>
                                <speed>72</speed>
                                <dropsCasings>false</dropsCasings>
                                <pelletCount>4</pelletCount>
                                <spreadMult>2</spreadMult>
                                <damageAmountBase>6</damageAmountBase>
                                <armorPenetrationBlunt>5.6</armorPenetrationBlunt>
                                <armorPenetrationSharp>22</armorPenetrationSharp>
                            </projectile>
                        </ThingDef>

                        <!-- ===== Reinforced Tesla/Coil Projectiles ===== -->
                        <ThingDef Class="CombatExtended.Lasers.LaserBeamDefCE" ParentName="LaserBulletWhite">
                            <defName>RM_Bullet_CoilPistol</defName>
                            <label>coil discharge</label>
                            <graphicData>
                                <color>(255,255,255)</color>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>EMP</damageDef>
                                <damageAmountBase>10</damageAmountBase>
                                <explosionRadius>0.3</explosionRadius>
                                <suppressionFactor>3.0</suppressionFactor>
                                <dangerFactor>2.0</dangerFactor>
                                <armorPenetrationSharp>12</armorPenetrationSharp>
                                <armorPenetrationBlunt>0.001</armorPenetrationBlunt>
                                <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
                            </projectile>
                        </ThingDef>

                        <ThingDef Class="CombatExtended.Lasers.LaserBeamDefCE" ParentName="LaserBulletWhite">
                            <defName>RM_Bullet_CoilRifle</defName>
                            <label>coil discharge</label>
                            <graphicData>
                                <color>(255,255,255)</color>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>EMP</damageDef>
                                <damageAmountBase>17</damageAmountBase>
                                <explosionRadius>0.5</explosionRadius>
                                <suppressionFactor>3.0</suppressionFactor>
                                <dangerFactor>2.0</dangerFactor>
                                <armorPenetrationSharp>12</armorPenetrationSharp>
                                <armorPenetrationBlunt>0.001</armorPenetrationBlunt>
                                <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
                            </projectile>
                        </ThingDef>

                        <ThingDef Class="CombatExtended.Lasers.LaserBeamDefCE" ParentName="LaserBulletWhite">
                            <defName>RM_Bullet_TeslaCoil</defName>
                            <label>coil discharge</label>
                            <graphicData>
                                <color>(255,255,255)</color>
                            </graphicData>
                            <projectile Class="CombatExtended.ProjectilePropertiesCE">
                                <damageDef>EMP</damageDef>
                                <damageAmountBase>20</damageAmountBase>
                                <explosionRadius>2.5</explosionRadius>
                                <suppressionFactor>3.0</suppressionFactor>
                                <dangerFactor>2.0</dangerFactor>
                                <armorPenetrationSharp>8</armorPenetrationSharp>
                                <armorPenetrationBlunt>0.001</armorPenetrationBlunt>
                                <applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
                            </projectile>
                        </ThingDef>

                    </value>
                </li>

            </operations>
        </match>
    </Operation>
</Patch>
