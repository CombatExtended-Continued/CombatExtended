<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	<Operation Class="PatchOperationFindMod">
    <mods>
		  <li>Logistics_Mechanoid</li>
    </mods>
		<match Class="PatchOperationSequence">
		 <operations>

      <!-- ==================== Logistic Mech ==================== -->

      <!-- ========== Add groups entry if it doesn't exist already ========== -->

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/parts/li[def="PowerClaw"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/parts/li[def="PowerClaw"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <li Class="PatchOperationConditional">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/parts/li[def="MechanicalFoot"]/groups</xpath>
        <nomatch Class="PatchOperationAdd">
          <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/parts/li[def="MechanicalFoot"]</xpath>
          <value>
            <groups />
          </value>
        </nomatch>
      </li>

      <!-- ========== Add armor coverage ========== -->

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/parts/li[def="PowerClaw"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/parts/li[def="MechanicalFoot"]/groups</xpath>
        <value>
          <li>CoveredByNaturalArmor</li>
        </value>
      </li>

      <!-- ========== Modify coverage ========== -->

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/coverage</xpath>
        <value>
          <coverage>0.08</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/coverage</xpath>
        <value>
          <coverage>0.75</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/parts/li[def="ArtificialBrain"]/coverage</xpath>
        <value>
          <coverage>0.15</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/parts/li[def="SightSensor"]/coverage</xpath>
        <value>
          <coverage>0.15</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/parts/li[def="HearingSensor"]/coverage</xpath>
        <value>
          <coverage>0.05</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalNeck"]/parts/li[def="MechanicalHead"]/parts/li[def="SmellSensor"]/coverage</xpath>
        <value>
          <coverage>0.05</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/coverage</xpath>
        <value>
          <coverage>0.15</coverage>
        </value>
      </li>

      <li Class="PatchOperationReplace">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/coverage</xpath>
        <value>
          <coverage>0.1</coverage>
        </value>
      </li>

      <!-- ========== Remove unwanted vanilla body parts ========== -->

      <li Class="PatchOperationRemove">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="Reactor"]</xpath>
      </li>

      <li Class="PatchOperationRemove">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="FluidReprocessor"]</xpath>
      </li>

      <!-- ========== Add new body parts ========== -->

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts</xpath>
        <value>
          <li>
            <def>MechanicalPowerCore</def>
            <coverage>0.12</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalCapacitor</def>
            <coverage>0.02</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalCapacitor</def>
            <coverage>0.02</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalHeatSink</def>
            <coverage>0.03</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalHeatSink</def>
            <coverage>0.03</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalCoolantTank</def>
            <coverage>0.06</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalRollerBearing</def>
            <coverage>0.06</coverage>
            <depth>Inside</depth>
          </li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalShoulder"]/parts/li[def="MechanicalArm"]/parts</xpath>
        <value>
          <li>
            <def>MechanicalUpperActuator</def>
            <coverage>0.15</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalUpperPiston</def>
            <coverage>0.25</coverage>
            <depth>Inside</depth>
          </li>
        </value>
      </li>

      <li Class="PatchOperationAdd">
        <xpath>Defs/BodyDef[defName="Mech_Logistic"]/corePart/parts/li[def="MechanicalLeg"]/parts</xpath>
        <value>
          <li>
            <def>MechanicalLowerActuator</def>
            <coverage>0.15</coverage>
            <depth>Inside</depth>
          </li>
          <li>
            <def>MechanicalLowerPiston</def>
            <coverage>0.25</coverage>
            <depth>Inside</depth>
          </li>
        </value>
      </li>

      </operations>
    </match>
  </Operation>
</Patch>			  